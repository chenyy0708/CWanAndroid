package com.horen.avbobo.ui;import android.app.Activity;import android.os.Bundle;import android.support.annotation.NonNull;import android.support.v7.widget.RecyclerView;import android.support.v7.widget.StaggeredGridLayoutManager;import android.view.View;import com.chad.library.adapter.base.BaseQuickAdapter;import com.chen.common.base.BaseFragment;import com.chen.common.di.component.AppComponent;import com.horen.avbobo.R;import com.horen.avbobo.adapter.AvboboAdapter;import com.horen.avbobo.api.Url;import com.horen.avbobo.bean.VideoListBean;import com.horen.avbobo.di.component.DaggerAvboboComponent;import com.horen.avbobo.di.module.AvboboModule;import com.horen.avbobo.mvp.contract.AvboboContract;import com.horen.avbobo.mvp.presenter.AvboboPresenter;import com.scwang.smartrefresh.layout.SmartRefreshLayout;import com.scwang.smartrefresh.layout.api.RefreshLayout;import com.scwang.smartrefresh.layout.listener.OnRefreshLoadMoreListener;import java.util.List;import javax.inject.Inject;/** * @author :ChenYangYi * @date :2018/04/24/13:57 * @description : 导航Fragment * @github :https://github.com/chenyy0708 */public class AvboboFragment extends BaseFragment<AvboboPresenter> implements AvboboContract.View {    private SmartRefreshLayout mRefreshLayout;    private RecyclerView mRecyclerView;    @Inject    AvboboAdapter mAdapter;    public static AvboboFragment newInstance() {        Bundle args = new Bundle();        AvboboFragment fragment = new AvboboFragment();        fragment.setArguments(args);        return fragment;    }    @Override    protected int getLayoutResource() {        return R.layout.fragment_avbobo;    }    @Override    public void initData(Bundle savedInstanceState) {        mRefreshLayout = (SmartRefreshLayout) rootView.findViewById(R.id.refreshLayout);        mRecyclerView = (RecyclerView) rootView.findViewById(R.id.recyclerView);        mRecyclerView.setLayoutManager(new StaggeredGridLayoutManager(2, StaggeredGridLayoutManager.VERTICAL));        mRecyclerView.setAdapter(mAdapter);        initRefreshListener();    }    @Override    public void setupActivityComponent(AppComponent appComponent) {        DaggerAvboboComponent.builder()                .appComponent(appComponent)                .avboboModule(new AvboboModule(this))                .build()                .inject(this);    }    @Override    public Activity getVActivity() {        return _mActivity;    }    @Override    public RefreshLayout getRefresh() {        return mRefreshLayout;    }    @Override    public void getTokenSuccess(String token) {    }    @Override    public void getVideoListSuccess(List<VideoListBean.DocsBean> mData) {        mAdapter.setNewData(mData);    }    @Override    public void showErrorTip(String msg) {    }    /**     * 刷新监听     */    private void initRefreshListener() {        // 设置加载监听        mRefreshLayout.setOnRefreshLoadMoreListener(new OnRefreshLoadMoreListener() {            @Override            public void onLoadMore(@NonNull RefreshLayout refreshLayout) {                // 加载更多                mPresenter.loadData();            }            @Override            public void onRefresh(@NonNull RefreshLayout refreshLayout) {                // 刷新数据                mPresenter.getData();            }        });        // Adapter 点击事件        mAdapter.setOnItemClickListener(new BaseQuickAdapter.OnItemClickListener() {            @Override            public void onItemClick(BaseQuickAdapter adapter, View view, int position) {                VideoListBean.DocsBean docsBean = mAdapter.getData().get(position);                VideoActivity.startActivity(_mActivity, Url.SERVICE + docsBean.getCoverData().get_$01().getLocal().getPath(), Url.SERVICE +                        docsBean.getVideoData().get_$01().getLocal().getPath());            }        });        mRefreshLayout.autoRefresh();    }}